# Title of my New Note

### 完整的 20 人 Foam + Git 协作流程（Git Flow 简化版）

#### 阶段一：初始化与规范确立（Setup & Standards）

| 步骤 | 参与者 | Git/Foam 操作与描述 | 目的 |
| :--- | :--- | :--- | :--- |
| **1. 仓库建立** | 团队领导 | 创建远程仓库（如 GitHub）。初始化 `main` 分支。 | 建立协作基础。 |
| **2. 环境配置** | 所有成员 | 安装 VS Code, Foam 插件，配置 LaTeX 渲染环境（如 Markdown Preview Enhanced）。 | 准备统一的工作环境。 |
| **3. 规范定义** | 团队领导 | 确定 **Markdown 格式规范**、**Foam 链接规范**（`[[Internal Link]]`）、**LaTeX 公式渲染标准**（使用 $$ 或 $）。 | 确保知识库风格一致性。 |
| **4. 权限与保护** | 团队领导 | 授予 20 名成员 `Write` 权限。设置 `main` 分支保护：**禁止直接 Push；PR 合并前必须通过至少 1 个 Approve。** | 确保主干稳定性和质量控制。 |
| **5. 本地克隆** | 所有成员 | `git clone [URL]` | 获取知识库副本。 |
| **6. 配置忽略** | 所有成员 | 确保 `.gitignore` 忽略 VS Code 缓存 (`.vscode/`)、Foam 缓存 (`.foam/`) 和操作系统文件。 | 保持仓库干净，只跟踪知识内容。 |

---

#### 阶段二：特性分支开发（Feature Branching）

**场景：** 成员 A 负责撰写关于“视觉 SLAM”的文档。

| 步骤 | 参与者 | Git/Foam 操作与描述 | 目的 |
| :--- | :--- | :--- | :--- |
| **1. 同步主干** | 成员 A | `git checkout main`；`git pull origin main` | 确保基于最新的知识库开始工作。 |
| **2. 创建分支** | 成员 A | `git checkout -b feature/visual-slam-theory` | 隔离工作环境。使用规范命名：`feature/topic`。 |
| **3. 本地编辑** | 成员 A | 在 Foam 中创建 `Visual_SLAM.md`。撰写内容，例如：**对极几何**，公式 $\mathbf{x}_2^T \mathbf{E} \mathbf{x}_1 = 0$。 | 完成知识内容创建。 |
| **4. 阶段性提交** | 成员 A | 定期本地提交：`git add .`；`git commit -m "feat: 完成了本质矩阵推导"` | 记录工作进度，形成提交历史。 |

---

#### 阶段三：冲突预防与远程同步（Synchronization & Push）

**场景：** 成员 A 正在工作，同时其他成员 B、C 的工作已合并到远程 `main`。

| 步骤 | 参与者 | Git/Foam 操作与描述 | 目的 |
| :--- | :--- | :--- | :--- |
| **1. 获取最新主干** | 成员 A | **在提交 PR 前，必须同步主干。**<br>a. `git checkout main` <br>b. `git pull origin main` | 获取远程 `main` 的最新提交。 |
| **2. 集成最新主干** | 成员 A | `git checkout feature/visual-slam-theory` <br>**`git merge main`** (推荐使用 Merge，保留历史) 或 `git rebase main` (保持线性历史)。 | 将最新的团队工作集成到自己的分支，**在本地解决冲突**。 |
| **3. 解决冲突** | 成员 A | 如果发生冲突（例如，A 和 C 同时修改了 `TOC.md`），在 VS Code 中解决冲突标志，然后 `git add .` 并 `git commit -m "merge: 解决与 main 的冲突"`。 | 确保 A 的分支是可干净合并的。 |
| **4. 远程推送** | 成员 A | `git push origin feature/visual-slam-theory` | 将包含最新主干和自己工作的分支推送到远程，准备发起 PR。 |

---

#### 阶段四：质量控制与合并（Pull Request & Review）

| 步骤 | 参与者 | Git/Foam 操作与描述 | 目的 |
| :--- | :--- | :--- | :--- |
| **1. 创建 PR** | 成员 A | 在 Web 界面创建 PR：`feature/visual-slam-theory` -> `main`。**（描述中应包含 Foam 链接和公式的预览信息）** | 请求团队审查。 |
| **2. 分配审阅者** | 维护者/系统 | 自动或手动分配 1-2 名相关领域的专家（如成员 D）进行审阅。 | 确保专业性和质量。 |
| **3. 严格审查** | 审阅者 (D) | 检查：**内容准确性**、**Markdown 格式**、**Foam 链接是否正确指向**、**LaTeX 公式渲染是否无误**。提出修改意见。 | 确保知识库质量。 |
| **4. 响应与迭代** | 成员 A | 根据审阅意见在本地修改，`commit` 并再次 `git push`。**（PR 自动更新）** | 完善文档。 |
| **5. 批准与合并** | 维护者 | 确认至少 1 个 Approve，PR 状态为可合并（No Conflicts）。执行 **Squash and Merge**（推荐，保持 `main` 历史干净）。 | 正式集成工作到主知识库。 |
| **6. 清理** | 维护者/A | 删除远程分支 `feature/visual-slam-theory`。 | 保持仓库整洁。 |

---

#### 阶段五：全员同步与持续迭代（Iteration）

| 步骤 | 参与者 | Git 操作与描述 | 目的 |
| :--- | :--- | :--- | :--- |
| **1. 本地清理** | 成员 A | 删除本地特性分支：`git branch -d feature/visual-slam-theory` | 清理本地环境。 |
| **2. 全员同步** | 所有成员 | 在开始任何新工作前：<br>`git checkout main`<br>**`git pull origin main`** | 确保所有本地知识库都是最新的，避免基于过时的主干创建分支。 |
| **3. 开启新工作** | 所有成员 | 回到阶段二，基于最新的 `main` 创建新的特性分支。 | 持续迭代知识库。 |