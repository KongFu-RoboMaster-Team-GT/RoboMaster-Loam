### 关于 如何记录文档开发
参考：
[[..\个人文件夹\邝涛\(General) 技术开发模板.md]]


### 技术文档模板讲解：如何记录你的研发过程和知识资产

朋友你好！当你启动一个技术项目时，你需要的不只是代码，更是一份**能追踪你思维路径的地图**。我们这份文档模板，就是你的研发日志和知识宝库。

我将带你逐个模块走一遍，讲解每个部分是如何帮助你工作的。

#### 1. 目标（Goal Setting）：我们现在要干什么？

**模板包含：`当前阶段的目标` 和 `记录日期`**

这是你开始任何工作时的“航海图”。

*   **当前阶段的目标**：它的作用是确保你每次打开文档时，都知道自己正在聚焦什么。你不需要写太宏大的愿景，只需聚焦于**本周、本阶段要交付的核心功能或解决的核心技术难点**。这是一种高效的聚焦方式。
*   **记录日期**：简单但非常关键。它让你清楚地知道，这份文档或者当前的阶段性工作是从哪个时间点开始或结束的。

#### 示例：！！！


**记录日期：** 2025-11-20

##### 任务范围（Scope）

本阶段核心任务是实现四轮移动机器人平台的**基于激光雷达的局部动态避障**功能，并在 ROS 2 (Humble Hawksbill) 环境下集成现有遥操作和状态反馈系统。

*   硬件平台： RPLIDAR S2M 激光雷达；Jetson Nano (ROS 2 主控)。
*   软件框架： ROS 2 Humble；Navigation2 (Nav2) 堆栈。
*   约束条件： 实时处理频率不低于 10 Hz；避障响应时间小于 200 ms。

##### 子任务目标（Sub-Goals and Deliverables）

1.  感知系统集成与校准 (Perception System):
    *   **目标 1.1:** 成功配置 RPLIDAR ROS 2 驱动，确保 LiDAR 话题 `/scan` 数据流稳定。
    *   **目标 1.2:** 完成 LiDAR 到机器人基座坐标系 (`base_link`) 的 TFS 静态转换配置，误差小于 5 mm/3°。
2.  局部路径规划与避障 (Local Planning & Obstacle Avoidance):
    *   **目标 2.1:** 配置 Nav2 堆栈，使用 Voxel Grid 或 Costmap 实现障碍物地图构建。
    *   **目标 2.2 (核心交付):** 部署 TEB Local Planner 或 DWB Planner，参数优化目标包括：平滑度、安全性（最小距离障碍物 0.3m）。
---

##### 2. 核心决定（Decision Log）：我们决定了什么？

**模板包含：`决定 1. E.g.`、`决定 2. E.g.` 等列表**

这个部分是这份文档的“**行动指令簿**”。它专门用来记录那些一旦确定，就不能随意更改的、或者对项目有重大影响的配置和方案。

**使用原则：** **只写结论，不要写解释。**

*   例如，你不需要写：“经过我们讨论，发现 SPI 协议比 I2C 速度更快，所以……”
*   你只需要记录：“**决定：使用 SPI 接口连接屏幕，CS 引脚固定在 D5.**”

它记录了项目在某个时间点的最终状态。如果你之后发现 Bug，或需要更改配置，你首先要看的就是这个列表，它告诉你：当初的基线是什么。

##### 示例：！！！
1. 决定： 选用 AWS IoT Core 作为云端平台，MQTT 协议版本固定为 3.1.1。
2. 决定： 数据包统一采用 Protocol Buffers (v3) 进行序列化，以降低网络带宽消耗。
3. 决定： 数据库选型 PostgreSQL，并启用 PostGIS 扩展用于地理位置数据存储。
4. 决定： 屏幕连接统一使用 SPI 接口，CS 引脚固定为 GPIO D5；SCK 接口固定为 GPIO D10。

---

##### 3. 研发过程（Development Log）：我是怎么做到的？

**模板包含：`1. E.g.`、`2. E.g.` 等详细步骤**

如果说“核心决定”是结果，那么“研发过程”就是**达成结果的详细日志**。这是整个文档中，最偏向于“日记”和“流水账”的部分，但它具有不可替代的价值。

*   **用途：** 详细记录你调试的步骤、遇到的错误、尝试的解决方案、以及最终成功的关键代码片段。
*   **为何重要？** 当你几个月后再次拿起这个项目，或者有新成员加入时，他可以沿着你的脚步，了解你是如何从“问题 A”到达“解决方案 B”的。它帮助你**回溯和重现 Bug**，这是工程开发中非常宝贵的资产。

示例：！！！
1. 安装 OCR
sudo apt update
sudo apt install build-essential git cmake
sudo apt install \
    libleptonica-dev \
    libicu-dev \
    libpango1.0-dev \
    libtiff-dev \
    libjpeg-dev
git clone ...
2. 仿真模型，似乎抖动十分厉害，不晓得什么原因：
   1. 怀疑是接触力 → 让右侧全部都不和轮子解耦 → 失败：非接触力缘故
   2. 怀疑是执行器 → 让左侧全部执行器取消只保留力矩执行器 → 左侧抖动严重 → 推测是其余执行器的辅助作用
   3. 逐个恢复 → 发现是左侧轮子速度执行器 防止轮子速度由于力矩突变和左侧关节位置执行器 放置产生轮子和关节的接触力
   4. 将相同条件 施加至右侧轮子 → 成功
---

##### 4. 理论知识（Knowledge Base）：我学会了什么？

**模板包含：一个独立的、开放的文本区域**

这个部分是你的**“技术成长区”**。它和你的当前项目可以没有直接关系。

*   **目的：** 它鼓励你将学习到的、系统化的理论知识收录进来，无论是关于算法、新的编程范式、硬件标准，还是设计模式。
*   **如何使用？** 你可以把它当成自己的学习笔记。比如，你在开发一个多线程应用，你顺便学习了“死锁发生的四个必要条件”。尽管你的程序里还没出现死锁，但你应该把这个理论知识记录在这里，供未来参考。

它帮你把实践（研发过程）和概念学习（理论知识）清晰地分开，加速你的专业知识积累。

#### 示例：

##### 1. 行为树 (Behavior Trees) 理论学习笔记

**主题：** Behavior Trees 作为机器人控制的新范式，对比传统有限状态机 (FSM)。

*   **核心优势：**
    *   **模块化和可重用性：** 节点结构化，易于构建复杂行为。FSM 的状态爆炸问题在 BT 中得到缓解。
    *   **可解释性：** 执行流清晰（从根到叶），易于调试和理解机器人的当前意图。
    *   **反应和规划分离：** 易于整合响应式行为 (Selector) 和顺序性任务 (Sequence)。
*   **关键节点类型：**
    *   **控制流节点 (Control Flow):** `Sequence` (AND 逻辑), `Selector` (OR 逻辑), `Fallback`, `Parallel`。定义子节点的执行顺序和规则。
    *   **执行节点 (Execution Nodes):** `Action` (执行具体运动或传感器任务，如：`move_to_goal`), `Condition` (检查环境或内部状态，如：`battery_low`)。
*   **状态返回：** 节点必须返回三个状态之一：`SUCCESS` (完成), `FAILURE` (失败), `RUNNING` (进行中)。这是 BT 调度器进行迭代的关键。


##### 2. EKF（扩展卡尔曼滤波）与里程计融合基础

**主题：** EKF 在机器人状态估计 (Localization) 中的应用和非线性处理。

*   **定位问题 (Localization):** 机器人需要估计其状态向量 $x_k = [x, y, \theta, v, \omega]^T$。
*   **非线性挑战：** 机器人的运动模型（如差分驱动的轮速到全局位置）和传感器观测模型通常是非线性的。标准卡尔曼滤波 (KF) 假设所有模型都是线性的。
*   **EKF 的处理方法：**
    *   **线性化：** EKF 通过在当前估计点 $\hat{x}_k$ 处，使用泰勒级数展开来近似非线性函数 $f(\cdot)$ 和 $h(\cdot)$。
    *   **雅可比矩阵 (Jacobian Matrix):** 状态转移矩阵 $F$ 和观测矩阵 $H$ 在 EKF 中被替换为其对应的雅可比矩阵 $A_k$ 和 $H_k$。
    *   $A_k = \frac{\partial f}{\partial x}\Bigm|_{x=\hat{x}_{k-1}} $
*   **应用启示：** 在 ROS 2 的 `robot_localization` 包中，EKF 是常用的融合 GPS、IMU 和轮式里程计数据的核心算法，理解其雅可比矩阵的推导对于调整协方差矩阵（噪声）至关重要。


---

##### 5. 链接（References）：资源都在哪里？

**模板包含：一个用于记录链接和路径的区域**

这是一个纯粹的 **“索引管理器”**。

*   你在开发过程中，可能会参考某个 GitHub 仓库、Stack Overflow 链接、厂商的 Datasheet PDF 路径、在你文件管理器的文件路径。
*   把它们收录在这里，你就建立了一个**项目资源清单**。下一次你或你的同事需要查看特定文档时，不需要再去搜索栏里大海捞针，直接点开这个列表即可。这是提高效率的简单方法。

示例：
1. 项目文件夹：
~/ros2_ws/src/avoidance_pkg
D:\Robotics_Projects\DiffDrive_Platform\CAD_Model\v3.0
2. PID 在线模拟器：
https://www.longluo.me/projects/pid/
3. 正运动学 Wiki
https://zhuanlan.zhihu.com/p/426994048
---

##### 6. 反思（Reflection/Inspiration）：意外的收获和想法

**模板包含：一个灵活的思考空间**

这个区域是留给那些“**灵光一闪**”的想法。

*   你可能在调试 A 功能时，突然想到 B 功能的一种全新实现方式，但现在还不是实现它的时机。
*   你可能对项目的整体架构产生了新的质疑或更宏大的规划。
*   你甚至可以写下对整个开发过程的感受：哪个环节做得不好，下次要如何改进。

“反思”鼓励你跳出当前任务的局限，进行批判性思考或创新思维捕获。这些想法往往是未来项目或个人成长的起点。

